<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daior</title>
    <!-- SweetAlert2 para notificaciones modernas -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --color-primary: #1b1b1b;
            --color-accent: #e74c3c;
            --color-tg: #0088cc;
            --color-light: #ecf0f1;
            --color-text: #333;
            --color-success: #27ae60;
            --color-warning: #f39c12;
            --color-info: #3498db;
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Segoe UI', sans-serif; 
        }
        
        body { 
            background-color: #f4f7f6; 
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- ANIMACIONES --- */
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .anim-bounce { animation: bounce 0.4s ease; }
        .anim-pulse { animation: pulse 2s infinite; }

        /* --- FORZAR Z-INDEX ALTO PARA SWEETALERT2 --- */
        .swal2-container {
            z-index: 10000 !important;
        }

        .swal2-popup {
            z-index: 10001 !important;
        }

        .swal2-backdrop-show {
            z-index: 9999 !important;
        }

        /* --- CORRECCI√ìN: SweetAlert2 sobre carrito lateral --- */
        .swal2-shown .swal2-container {
            z-index: 2001 !important; /* Mayor que el carrito (2000) */
        }

        /* --- HEADER --- */
        header {
            background-color: var(--color-primary);
            color: white; 
            padding: 1rem 2rem;
            position: sticky; 
            top: 0; 
            z-index: 1000;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .cart-icon-container { 
            position: relative; 
            cursor: pointer; 
            font-size: 1.5rem; 
            transition: 0.2s; 
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        .cart-icon-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        #cart-count {
            position: absolute; 
            top: -5px; 
            right: -5px;
            background: var(--color-accent); 
            color: white;
            border-radius: 50%; 
            padding: 2px 6px; 
            font-size: 0.75rem;
            font-weight: bold;
            min-width: 18px;
            text-align: center;
        }

        .bi-cart3 {
            font-size: 1.5rem;
        }

        /* --- NUEVO: Banner de oferta especial --- */
        .offer-banner {
            background: linear-gradient(90deg, var(--color-accent), #ff6b6b);
            color: white;
            text-align: center;
            padding: 12px 20px;
            font-weight: 600;
            display: none; /* Oculto por defecto */
            position: relative;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(231, 76, 60, 0.3);
        }

        .offer-banner.show {
            display: block;
            animation: slideInUp 0.5s ease;
        }

        .offer-close {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: 0.2s;
        }

        .offer-close:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-50%) scale(1.1);
        }

        /* --- FILTROS --- */
        .container { 
            max-width: 1200px; 
            margin: 30px auto; 
            padding: 0 20px; 
            flex: 1;
        }
        
        .filter-container {
            background: white; 
            padding: 20px; 
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
            margin-bottom: 30px;
            display: flex; 
            flex-wrap: wrap; 
            gap: 25px; 
            justify-content: center; 
            align-items: center;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
            flex: 1;
        }

        .filter-group.busqueda {
            min-width: 300px;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--color-primary);
        }

        .filter-group select, .filter-group input {
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }

        .filter-group input[type="text"] {
            padding: 10px 15px;
            padding-left: 40px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%232c3e50' class='bi bi-search' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: 15px center;
            background-size: 16px;
        }

        /* --- PRODUCTOS (PRECIO M√ÅS GRANDE) --- */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 25px; 
            margin-bottom: 50px;
        }
        
        @media (max-width: 900px) { 
            .product-grid { 
                grid-template-columns: repeat(2, 1fr); 
            } 
        }
        
        @media (max-width: 600px) { 
            .product-grid { 
                grid-template-columns: 1fr; 
            } 
        }

        .product-card {
            background: white; 
            border-radius: 12px; 
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
            display: flex; 
            flex-direction: column;
            transition: 0.3s;
            position: relative;
        }
        
        .product-card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        /* --- NUEVO: Badge de oferta --- */
        .offer-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--color-accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 3px 8px rgba(231, 76, 60, 0.3);
            animation: pulse 2s infinite;
        }
        
        .product-image { 
            width: 100%; 
            aspect-ratio: 1/1; 
            object-fit: cover; 
            cursor: pointer;
            transition: 0.3s;
        }

        .product-image:hover {
            transform: scale(1.02);
        }
        
        .product-info { 
            padding: 20px; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
        }
        
        .product-price { 
            font-size: 1.4rem;
            font-weight:normal; 
            margin: 5px 0; 
            color: var(--color-primary); 
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- NUEVO: Precio con descuento --- */
        .old-price {
            font-size: 1.1rem;
            color: #95a5a6;
            text-decoration: line-through;
        }

        .discount-percent {
            background: var(--color-success);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .btn-add {
            background: var(--color-primary); 
            color: white; 
            border: none;
            padding: 12px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }

        .btn-add:hover {
            background: #1a252f;
            transform: scale(1.02);
        }

        /* --- NUEVO: Bot√≥n Comprar Ahora --- */
        .btn-buy-now {
            background: var(--color-success); 
            color: white; 
            border: none;
            padding: 12px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex: 1;
        }

        .btn-buy-now:hover {
            background: #219653;
            transform: scale(1.02);
        }

        /* --- CARRITO LATERAL --- */
        .cart-sidebar {
            position: fixed; 
            right: -400px; 
            top: 0; 
            width: 350px; 
            height: 100%;
            background: white; 
            z-index: 2000; 
            transition: 0.4s;
            padding: 25px; 
            display: flex; 
            flex-direction: column;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
        }
        
        .cart-sidebar.active { 
            right: 0; 
        }
        
        .cart-items { 
            flex-grow: 1; 
            overflow-y: auto; 
            margin-top: 20px; 
            padding-right: 10px;
        }
        
        .cart-item { 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            margin-bottom: 15px; 
            border-bottom: 1px solid #eee; 
            padding-bottom: 10px; 
        }
        
        .qty-controls { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            margin-top: 8px; 
        }
        
        .btn-qty {
            width: 28px; 
            height: 28px; 
            border-radius: 50%; 
            border: 2px solid var(--color-primary);
            background: white; 
            color: var(--color-primary);
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-weight: bold;
            transition: 0.2s;
        }
        
        .btn-qty:hover { 
            background: var(--color-primary);
            color: white;
        }

        /* --- MODAL RECIBO (ANIMADO) --- */
        .modal-overlay {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(0,0,0,0.85); 
            display: none; 
            justify-content: center; 
            align-items: center; 
            z-index: 3000;
        }
        
        .modal-overlay.active { 
            display: flex; 
        }
        
        .modal-content {
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            width: 90%; 
            max-width: 500px;
            text-align: center; 
            animation: fadeInScale 0.4s ease;
        }
        
        /* --- ORDEN DE COMPRA FORMAL BIEN ALINEADO --- */
        .summary-box { 
            text-align: left; 
            background: #fff; 
            padding: 25px; 
            margin: 20px 0; 
            border-radius: 8px; 
            font-family: 'Courier New', monospace, sans-serif;
            border: 2px dashed #ccc;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .summary-box::before {
            content: "ORDEN DE COMPRA";
            display: block;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--color-primary);
            border-bottom: 2px solid var(--color-primary);
            padding-bottom: 10px;
            letter-spacing: 1px;
            width: 100%;
        }

        .receipt-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9rem;
            border-bottom: 1px dashed #ddd;
            padding-bottom: 10px;
            width: 100%;
        }

        .receipt-items {
            width: 100%;
            margin: 15px 0;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dotted #eee;
            width: 100%;
        }

        .item-name {
            flex: 3;
            font-weight: 500;
            text-align: left;
        }

        .item-qty {
            flex: 1;
            text-align: center;
            font-weight: 500;
        }

        .item-price {
            flex: 1;
            text-align: center;
            font-weight: 500;
        }

        .item-total {
            flex: 1;
            text-align: right;
            font-weight: bold;
        }

        .receipt-totals {
            margin-top: 20px;
            border-top: 2px solid #333;
            padding-top: 15px;
            width: 100%;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            width: 100%;
        }

        .total-row.final {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--color-primary);
            margin-top: 10px;
            border-top: 2px dashed #333;
            padding-top: 10px;
        }

        .order-number {
            background: var(--color-primary);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 15px;
            font-family: monospace;
            letter-spacing: 1px;
        }
        
        .btn-telegram {
            background-color: var(--color-tg); 
            color: white; 
            text-decoration: none;
            padding: 15px 30px; 
            border-radius: 50px; 
            display: inline-block; 
            font-weight: bold;
            transition: 0.2s;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto;
        }

        .btn-telegram:hover {
            background-color: #006699;
            transform: scale(1.05);
        }

        /* --- ESTILO PARA BOT√ìN DESCARGA PNG --- */
        .btn-descargar {
            background-color: var(--color-success); 
            color: white; 
            text-decoration: none;
            padding: 15px 30px; 
            border-radius: 50px; 
            display: inline-block; 
            font-weight: bold;
            transition: 0.2s;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 10px auto 0;
            width: 100%;
            max-width: 300px;
        }

        .btn-descargar:hover {
            background-color: #219653;
            transform: scale(1.05);
        }

        .overlay-bg { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            display: none; 
            z-index: 1500; 
        }
        
        .overlay-bg.active { 
            display: block; 
        }

        /* --- MODAL DETALLE PRODUCTO --- */
        .modal-producto {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 4000;
            animation: fadeIn 0.3s ease;
        }

        .modal-producto.active {
            display: flex;
        }

        .modal-producto-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            overflow: hidden;
            animation: fadeInScale 0.3s ease;
        }

        .modal-producto-img {
            width: 100%;
            height: 350px;
            object-fit: cover;
            display: block;
        }

        .modal-producto-info {
            padding: 25px;
        }

        .modal-producto-categoria {
            font-size: 0.8rem;
            color: #888;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .modal-producto-nombre {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .modal-producto-descripcion {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .modal-producto-precio {
            font-size: 2rem;
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 25px;
        }

        .modal-producto-actions {
            display: flex;
            gap: 15px;
        }

        .btn-close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
            z-index: 10;
        }

        .btn-close-modal:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* --- FOOTER --- */
        footer {
            background-color: var(--color-primary);
            color: white;
            padding: 40px 20px 20px;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: white;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 2px;
            background-color: var(--color-accent);
        }

        .footer-section p {
            margin-bottom: 10px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.9);
        }

        .contact-item i {
            color: var(--color-accent);
            font-size: 1.2rem;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-link:hover {
            color: white;
            transform: translateX(5px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* --- NOTIFICACIONES PERSONALIZADAS --- */
        .notificacion-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 350px;
        }

        .notificacion {
            background: white;
            border-radius: 10px;
            padding: 16px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInRight 0.3s ease forwards;
            border-left: 4px solid var(--color-primary);
            transform: translateX(100%);
            opacity: 0;
        }

        .notificacion.hide {
            animation: slideOutRight 0.3s ease forwards;
        }

        .notificacion.exito {
            border-left-color: var(--color-success);
        }

        .notificacion.error {
            border-left-color: var(--color-accent);
        }

        .notificacion.info {
            border-left-color: var(--color-info);
        }

        .notificacion.advertencia {
            border-left-color: var(--color-warning);
        }

        .notificacion-icono {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .notificacion.exito .notificacion-icono {
            color: var(--color-success);
        }

        .notificacion.error .notificacion-icono {
            color: var(--color-accent);
        }

        .notificacion.info .notificacion-icono {
            color: var(--color-info);
        }

        .notificacion.advertencia .notificacion-icono {
            color: var(--color-warning);
        }

        .notificacion-contenido {
            flex-grow: 1;
        }

        .notificacion-titulo {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--color-primary);
        }

        .notificacion-mensaje {
            color: #666;
            font-size: 0.9rem;
        }

        .notificacion-close {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: 0.2s;
            flex-shrink: 0;
        }

        .notificacion-close:hover {
            background: #f5f5f5;
            color: #666;
        }

        /* --- Ocultar notificaciones en dispositivos m√≥viles --- */
        @media (max-width: 768px) {
            .notificacion-container {
                display: none;
            }
            
            .modal-producto-content {
                width: 95%;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .modal-producto-img {
                height: 250px;
            }
            
            .modal-producto-actions {
                flex-direction: column;
            }
            
            .filter-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                min-width: 100%;
            }
            
            .filter-group.busqueda {
                min-width: 100%;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .footer-section h3::after {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .contact-item {
                justify-content: center;
            }

            .receipt-item {
                font-size: 0.9rem;
            }

            .btn-descargar, .btn-telegram, .btn-buy-now, .btn-add {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .product-actions {
                flex-direction: column;
            }

            .offer-banner {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }

        /* --- RESPONSIVE MEJORADO --- */
        @media (max-width: 480px) {
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .filter-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-group {
                min-width: 100%;
            }
            
            header h2 {
                font-size: 1.2rem;
            }
            
            .modal-producto-info {
                padding: 20px;
            }
            
            .modal-producto-nombre {
                font-size: 1.3rem;
            }
            
            .modal-producto-precio {
                font-size: 1.8rem;
            }
            
            .notificacion {
                max-width: calc(100vw - 40px);
            }
            
            footer {
                padding: 30px 15px 15px;
            }
            
            .footer-section h3 {
                font-size: 1.1rem;
            }

            .summary-box {
                padding: 15px;
            }

            .item-name {
                flex: 2;
            }

            .btn-descargar, .btn-telegram, .btn-buy-now, .btn-add {
                padding: 10px 15px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>

    <!-- NUEVO: Banner de oferta especial -->
    <div class="offer-banner" id="offer-banner">
        üéÅ ¬°Oferta especial! Descuentos de hasta 55% en servicios üî•.
        <button class="offer-close" onclick="cerrarBannerOferta()">
            <i class="bi bi-x"></i>
        </button>
    </div>

    <header>
        <h2 style="font-weight: 800;">üçÉ Daior</h2>
        <div class="cart-icon-container" id="cart-icon" onclick="toggleCart()">
            <i class="bi bi-cart3"></i>
            <span id="cart-count">0</span>
        </div>
    </header>

    <main class="container">
        <div class="filter-container">
            <!-- B√∫squeda por nombre (izquierda) -->
            <div class="filter-group busqueda">
                <label>Buscar producto:</label>
                <input type="text" id="filtro-busqueda" placeholder="Escribe el nombre del producto..." oninput="aplicarFiltros()">
            </div>
            
            <!-- Filtro por categor√≠a -->
            <div class="filter-group">
                <label>Categor√≠a:</label>
                <select id="filtro-categoria" onchange="aplicarFiltros()">
                    <option value="todos">Todos los productos</option>
                </select>
            </div>
            
            <!-- Filtro por precio -->
            <div class="filter-group">
                <label>Precio M√°x: $<span id="precio-valor">150</span></label>
                <input type="range" id="filtro-precio" min="0" max="150" value="150" step="5" oninput="actualizarLabelPrecio()" onchange="aplicarFiltros()">
            </div>
        </div>
        <div class="product-grid" id="catalogo"></div>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>üçÉ Daior</h3>
                <p>Trabajando en equipo podemos lograr resultados √∫nicos...</p>
            </div>
            
            <div class="footer-section">
                <h3>üìû Contacto</h3>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="bi bi-envelope"></i>
                        <span>beatsbydaior@gmail.com</span>
                    </div>
                    <div class="contact-item">
                        <i class="bi bi-telegram"></i>
                        <a href="https://t.me/joshgtz" target="_blank" class="footer-link">
                            @joshgtz
                        </a>
                    </div>
                    <div class="contact-item">
                        <i class="bi bi-geo-alt"></i>
                        <span>Caracas, Venezuela</span>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>‚ö° + Info</h3>
                <p>"La vida es mejor si hay balance" üí≠</p>
                <p style="margin-top: 10px;"><strong>Tiempo de entrega:</strong> 2-5 d√≠as h√°biles</p>
            </div>
        </div>
        
        <div class="copyright">
            <p>¬© 2026 Daior | Todos los derechos reservados</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">Los precios est√°n en d√≥lares americanos (USD)</p>
        </div>
    </footer>

    <!-- Contenedor de notificaciones -->
    <div class="notificacion-container" id="notificacion-container"></div>

    <div class="overlay-bg" id="overlay" onclick="toggleCart()"></div>
    
    <div class="cart-sidebar" id="cart-sidebar">
        <h2><i class="bi bi-cart3"></i> Mi Carrito</h2>
        <div class="cart-items" id="cart-items"></div>
        <div style="font-size: 1.2rem; font-weight: bold; margin-top: 20px; padding-top: 10px; border-top: 2px solid #eee;">
            Total: $<span id="total-price">0.00</span>
        </div>
        <button class="btn-add" style="background: var(--color-accent); margin-top: 15px;" onclick="abrirResumen()">
            <i class="bi bi-check-circle"></i> Finalizar Pedido
        </button>
        <button class="btn-add" style="background: #95a5a6; margin-top: 10px;" onclick="vaciarCarrito()">
            <i class="bi bi-trash"></i> Vaciar Carrito
        </button>
        <button onclick="toggleCart()" style="margin-top: 10px; background: none; border: none; color:#888; cursor: pointer; padding: 10px; display: flex; align-items: center; gap: 5px;">
            <i class="bi bi-arrow-left"></i> Cerrar
        </button>
    </div>

    <!-- Modal Detalle Producto -->
    <div class="modal-producto" id="modal-producto">
        <button class="btn-close-modal" onclick="cerrarModalProducto()">
            <i class="bi bi-x"></i>
        </button>
        <div class="modal-producto-content">
            <img id="modal-img" class="modal-producto-img" src="" alt="Producto">
            <div class="modal-producto-info">
                <div class="modal-producto-categoria" id="modal-categoria"></div>
                <h2 class="modal-producto-nombre" id="modal-nombre"></h2>
                <p class="modal-producto-descripcion" id="modal-descripcion"></p>
                <div class="modal-producto-precio" id="modal-precio"></div>
                <div class="modal-producto-actions">
                    <button class="btn-add" style="flex: 1;" id="modal-btn-agregar">
                        <i class="bi bi-cart-plus"></i> Agregar al Carrito
                    </button>
                    <!-- NUEVO: Bot√≥n Comprar Ahora en modal -->
                    <button class="btn-buy-now" style="flex: 1;" id="modal-btn-comprar">
                        <i class="bi bi-bag-check"></i> Comprar Ahora
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL RESUMEN CON NUEVO BOT√ìN DE DESCARGA -->
    <div class="modal-overlay" id="modal-resumen">
        <div class="modal-content">
            <h2><i class="bi bi-receipt"></i> Resumen de Pedido</h2>
            <div class="summary-box" id="resumen-lista"></div>
            <p style="color:var(--color-accent); font-weight:bold; margin-bottom: 20px; margin-top: 15px;">
                <i class="bi bi-exclamation-triangle"></i> Tome una captura de pantalla a esta ventana o descargue la orden como imagen, luego debes enviarla a nuestro Telegram para procesar el pedido.
            </p>
            <!-- NUEVO BOT√ìN para descargar recibo como PNG -->
            <button class="btn-descargar" onclick="descargarResumenPNG()">
                <i class="bi bi-download"></i> Descargar Orden
            </button>
            <br>
            <!-- Bot√≥n para Telegram (existente) -->
            <button class="btn-telegram" onclick="procesarEnvioTelegram()">
                <i class="bi bi-telegram"></i> Enviar a Telegram
            </button>
            <br>
            <button onclick="cerrarResumen()" style="background:none; border:none; text-decoration: underline; cursor:pointer; padding: 10px; display: flex; align-items: center; gap: 5px; margin: 0 auto;">
                <i class="bi bi-arrow-left"></i> Seguir comprando
            </button>
        </div>
    </div>

    <!-- SweetAlert2 para notificaciones especiales -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Biblioteca para generar la imagen PNG -->
    <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.13/dist/html-to-image.min.js"></script>
    
    <script>
        // NUEVO: Productos con ofertas especiales
        const productos = [
            { 
                id: 1, 
                nombre: "Vocal Mixing", 
                precio: 44.99, 
                precioOriginal: 99.99, // NUEVO: Precio original para mostrar descuento
                categoria: "Servicios", 
                img: "https://i.pinimg.com/736x/72/07/df/7207dfcfb37e7d3483f5df35712d903d.jpg",
                descripcion: "Mezcla solo de voces + instrumental, llevar√© tu canci√≥n al siguiente nivel.",
                oferta: true // NUEVO: Indicador de oferta
            },
            { 
                id: 2, 
                nombre: "Mixing Silver", 
                precio: 80.00, 
                precioOriginal: 125.00,
                categoria: "Servicios", 
                img: "https://i.pinimg.com/1200x/a3/a3/a4/a3a3a48c1fc37118081f5f0e50a83fc9.jpg",
                descripcion: "Mezcla de hasta 25 tracks, llevar√© tu canci√≥n al siguiente nivel.",
                oferta: true
            },
            { 
                id: 3, 
                nombre: "Mixing Platinum", 
                precio: 134.00,
                precioOriginal: 224.99,
                categoria: "Servicios", 
                img: "https://i.pinimg.com/736x/f7/c6/f1/f7c6f103d8b793839417a6c23bcba1c3.jpg",
                descripcion: "Mezcla de hasta 45 tracks, llevar√© tu canci√≥n al siguiente nivel.",
                oferta: true
            },
            { 
                id: 4, 
                nombre: "Exclusive Beat", 
                precio: 150.00, 
                categoria: "Servicios", 
                img: "https://i.pinimg.com/1200x/ce/a5/7b/cea57bd488a637633c57bf61aad4e2ff.jpg",
                descripcion: "Beat exclusivo para tu proyecto musical, sin regal√≠as adicionales.",
                oferta: false
            },
            { 
                id: 5, 
                nombre: "Masterizaci√≥n", 
                precio: 35.00, 
                precioOriginal: 45.00,
                categoria: "Servicios", 
                img: "https://i.pinimg.com/1200x/ec/38/c3/ec38c3b5e3fdbd592f0ee45ea581e265.jpg",
                descripcion: "El √∫ltimo paso que necesita tu canci√≥n para que tenga una fiel representaci√≥n final",
                oferta: true
            },
        ];

        let carrito = JSON.parse(localStorage.getItem('mi_carrito_web')) || [];
        let numeroOrden = localStorage.getItem('numero_orden') || generarNumeroOrden();
        let productoSeleccionadoId = null;
        let bannerMostrado = localStorage.getItem('banner_oferta_mostrado') !== 'true';

        // Generar n√∫mero de orden √∫nico
        function generarNumeroOrden() {
            const nuevoNumero = `PED-${Date.now().toString().slice(-6)}-${Math.floor(Math.random() * 1000).toString().padStart(3, '0')}`;
            localStorage.setItem('numero_orden', nuevoNumero);
            return nuevoNumero;
        }

        // NUEVO: Mostrar banner de oferta
        function mostrarBannerOferta() {
            if (bannerMostrado) {
                const banner = document.getElementById('offer-banner');
                setTimeout(() => {
                    banner.classList.add('show');
                    // Mostrar solo por 30 segundos
                    setTimeout(() => {
                        cerrarBannerOferta();
                    }, 30000);
                }, 2000); // Aparece despu√©s de 2 segundos
            }
        }

        // NUEVO: Cerrar banner de oferta
        function cerrarBannerOferta() {
            const banner = document.getElementById('offer-banner');
            banner.classList.remove('show');
            localStorage.setItem('banner_oferta_mostrado', 'true');
            bannerMostrado = false;
        }

        // Sistema de notificaciones personalizadas
        function mostrarNotificacion(titulo, mensaje, tipo = 'exito', duracion = 3000) {
            // No mostrar notificaciones en dispositivos m√≥viles
            if (window.innerWidth <= 768) {
                return;
            }
            
            const container = document.getElementById('notificacion-container');
            const id = 'notificacion-' + Date.now();
            
            // Icono seg√∫n el tipo
            let icono = '';
            switch(tipo) {
                case 'exito':
                    icono = '<i class="bi bi-check-circle-fill"></i>';
                    break;
                case 'error':
                    icono = '<i class="bi bi-x-circle-fill"></i>';
                    break;
                case 'info':
                    icono = '<i class="bi bi-info-circle-fill"></i>';
                    break;
                case 'advertencia':
                    icono = '<i class="bi bi-exclamation-triangle-fill"></i>';
                    break;
            }
            
            const notificacionHTML = `
                <div class="notificacion ${tipo}" id="${id}">
                    <div class="notificacion-icono">${icono}</div>
                    <div class="notificacion-contenido">
                        <div class="notificacion-titulo">${titulo}</div>
                        <div class="notificacion-mensaje">${mensaje}</div>
                    </div>
                    <button class="notificacion-close" onclick="cerrarNotificacion('${id}')">
                        <i class="bi bi-x"></i>
                    </button>
                </div>
            `;
            
            container.insertAdjacentHTML('afterbegin', notificacionHTML);
            
            // Eliminar autom√°ticamente despu√©s de la duraci√≥n
            if (duracion > 0) {
                setTimeout(() => {
                    cerrarNotificacion(id);
                }, duracion);
            }
            
            return id;
        }

        function cerrarNotificacion(id) {
            const notificacion = document.getElementById(id);
            if (notificacion) {
                notificacion.classList.add('hide');
                setTimeout(() => {
                    notificacion.remove();
                }, 300);
            }
        }

        // Cargar categor√≠as autom√°ticamente
        function cargarCategorias() {
            const selectCategoria = document.getElementById('filtro-categoria');
            
            // Obtener categor√≠as √∫nicas de los productos
            const categorias = [...new Set(productos.map(p => p.categoria))];
            
            // Limpiar opciones existentes (excepto "Todos")
            selectCategoria.innerHTML = '<option value="todos">Todos los productos</option>';
            
            // Agregar cada categor√≠a como opci√≥n
            categorias.forEach(categoria => {
                const option = document.createElement('option');
                option.value = categoria;
                option.textContent = categoria;
                selectCategoria.appendChild(option);
            });
        }

        // NUEVO: Renderizar productos con ofertas
        function renderizar(lista) {
            const cat = document.getElementById('catalogo');
            cat.innerHTML = '';
            
            if (lista.length === 0) {
                cat.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 50px 20px;">
                        <div style="font-size: 4rem; color: #ddd; margin-bottom: 20px;">
                            <i class="bi bi-search"></i>
                        </div>
                        <h3 style="color: #666; margin-bottom: 10px;">No se encontraron productos</h3>
                        <p style="color: #999;">Intenta con otros t√©rminos de b√∫squeda o ajusta los filtros.</p>
                    </div>
                `;
                return;
            }
            
            lista.forEach(p => {
                const tieneOferta = p.oferta && p.precioOriginal;
                const descuento = tieneOferta ? Math.round(((p.precioOriginal - p.precio) / p.precioOriginal) * 100) : 0;
                
                cat.innerHTML += `
                    <div class="product-card" onclick="abrirModalProducto(${p.id})">
                        ${tieneOferta ? `<div class="offer-badge">-${descuento}%</div>` : ''}
                        <img src="${p.img}" class="product-image" alt="${p.nombre}">
                        <div class="product-info">
                            <span style="font-size:0.7rem; color:#888; text-transform: uppercase; font-weight: bold;">${p.categoria}</span>
                            <h3 style="margin: 5px 0;">${p.nombre}</h3>
                            <div class="product-price">
                                $${p.precio.toFixed(2)}
                                ${tieneOferta ? `
                                    <span class="old-price">$${p.precioOriginal.toFixed(2)}</span>
                                    <span class="discount-percent">-${descuento}%</span>
                                ` : ''}
                            </div>
                            <div class="product-actions">
                                <!-- NUEVO: Bot√≥n Comprar Ahora -->
                                <button class="btn-buy-now" onclick="comprarAhora(${p.id})">
                                    <i class="bi bi-bag-check"></i> Comprar
                                </button>
                                <button class="btn-add" onclick="agregarAlCarrito(${p.id})">
                                    <i class="bi bi-cart-plus"></i> Agregar
                                </button>
                            </div>
                        </div>
                    </div>`;
            });
        }

        // NUEVO: Funci√≥n Comprar Ahora
        function comprarAhora(id) {
            const prod = productos.find(p => p.id === id);
            const existe = carrito.find(p => p.id === id);
            
            // Limpiar carrito y a√±adir solo este producto
            carrito = [];
            carrito.push({ ...prod, cantidad: 1 });
            
            guardar();
            
            // Animaci√≥n del icono del carrito
            const icon = document.getElementById('cart-icon');
            icon.classList.remove('anim-bounce');
            void icon.offsetWidth;
            icon.classList.add('anim-bounce');
            
            // Remover animaci√≥n despu√©s de completarse
            setTimeout(() => {
                icon.classList.remove('anim-bounce');
            }, 400);
            
            // Notificaci√≥n personalizada
            mostrarNotificacion(
                '¬°Compra r√°pida!',
                `${prod.nombre} a√±adido. Redirigiendo al resumen...`,
                'exito',
                1500
            );
            
            // Cerrar modal de producto si est√° abierto
            if (document.getElementById('modal-producto').classList.contains('active')) {
                cerrarModalProducto();
            }
            
            // Abrir resumen autom√°ticamente despu√©s de un breve delay
            setTimeout(() => {
                abrirResumen();
            }, 800);
        }

        // Abrir modal de detalle del producto (actualizado)
        function abrirModalProducto(id) {
            const producto = productos.find(p => p.id === id);
            if (!producto) return;
            
            productoSeleccionadoId = id;
            
            document.getElementById('modal-img').src = producto.img;
            document.getElementById('modal-categoria').textContent = producto.categoria;
            document.getElementById('modal-nombre').textContent = producto.nombre;
            document.getElementById('modal-descripcion').textContent = producto.descripcion;
            
            // Mostrar precio con oferta si aplica
            const tieneOferta = producto.oferta && producto.precioOriginal;
            const descuento = tieneOferta ? Math.round(((producto.precioOriginal - producto.precio) / producto.precioOriginal) * 100) : 0;
            
            if (tieneOferta) {
                document.getElementById('modal-precio').innerHTML = `
                    <span style="font-size: 1.8rem; color: #95a5a6; text-decoration: line-through; margin-right: 10px;">
                        $${producto.precioOriginal.toFixed(2)}
                    </span>
                    <span style="font-size: 2rem; color: var(--color-primary);">
                        $${producto.precio.toFixed(2)}
                    </span>
                    <span style="background: var(--color-success); color: white; padding: 5px 10px; border-radius: 10px; font-size: 1rem; margin-left: 10px;">
                        -${descuento}% OFF
                    </span>
                `;
            } else {
                document.getElementById('modal-precio').textContent = `$${producto.precio.toFixed(2)}`;
            }
            
            // Configurar bot√≥n de agregar
            const btnAgregar = document.getElementById('modal-btn-agregar');
            btnAgregar.onclick = function() {
                agregarAlCarrito(id);
                cerrarModalProducto();
            };
            
            // NUEVO: Configurar bot√≥n Comprar Ahora en modal
            const btnComprar = document.getElementById('modal-btn-comprar');
            btnComprar.onclick = function() {
                comprarAhora(id);
            };
            
            document.getElementById('modal-producto').classList.add('active');
        }

        // Cerrar modal de detalle del producto
        function cerrarModalProducto() {
            document.getElementById('modal-producto').classList.remove('active');
            productoSeleccionadoId = null;
        }

        // Cerrar modal con tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                if (document.getElementById('modal-producto').classList.contains('active')) {
                    cerrarModalProducto();
                }
            }
        });

        function agregarAlCarrito(id) {
            const prod = productos.find(p => p.id === id);
            const existe = carrito.find(p => p.id === id);
            
            if (existe) {
                existe.cantidad++;
            } else {
                carrito.push({ ...prod, cantidad: 1 });
            }
            
            // Animaci√≥n del icono del carrito
            const icon = document.getElementById('cart-icon');
            icon.classList.remove('anim-bounce');
            void icon.offsetWidth;
            icon.classList.add('anim-bounce');
            
            // Remover animaci√≥n despu√©s de completarse
            setTimeout(() => {
                icon.classList.remove('anim-bounce');
            }, 400);
            
            // Notificaci√≥n personalizada
            mostrarNotificacion(
                'Producto agregado',
                `${prod.nombre} se agreg√≥ al carrito`,
                'exito',
                2000
            );
            
            guardar();
        }

        function cambiarCantidad(id, cambio) {
            const item = carrito.find(p => p.id === id);
            if (item) {
                item.cantidad += cambio;
                if (item.cantidad <= 0) {
                    // CORRECCI√ìN: Eliminar sin preguntar
                    carrito = carrito.filter(p => p.id !== id);
                    mostrarNotificacion(
                        'Producto eliminado',
                        'El producto fue eliminado del carrito',
                        'error',
                        1500
                    );
                }
                guardar();
            }
        }

        // CORRECCI√ìN: Eliminar producto sin confirmaci√≥n
        function eliminar(id) {
            carrito = carrito.filter(p => p.id !== id);
            guardar();
            
            mostrarNotificacion(
                'Producto eliminado',
                'El producto fue eliminado del carrito',
                'error',
                1500
            );
        }

        function vaciarCarrito() {
            if (carrito.length === 0) {
                // Usar SweetAlert2 para mensajes m√°s elegantes
                Swal.fire({
                    icon: 'info',
                    title: 'Carrito vac√≠o',
                    text: 'El carrito ya est√° vac√≠o',
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 2000,
                    timerProgressBar: true,
                });
                return;
            }
            
            // Usar SweetAlert2 para confirmaci√≥n m√°s elegante
            Swal.fire({
                title: '¬øVaciar carrito?',
                text: "¬øEst√° seguro de vaciar todo el carrito?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#e74c3c',
                cancelButtonColor: '#95a5a6',
                confirmButtonText: 'S√≠, vaciar',
                cancelButtonText: 'Cancelar',
                customClass: {
                    container: 'swal2-container',
                    popup: 'swal2-popup'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    carrito = [];
                    guardar();
                    
                    mostrarNotificacion(
                        'Carrito vaciado',
                        'Todos los productos fueron eliminados',
                        'advertencia',
                        1500
                    );
                }
            });
        }

        function guardar() {
            localStorage.setItem('mi_carrito_web', JSON.stringify(carrito));
            actualizarUI();
        }

        function actualizarUI() {
            const listaUI = document.getElementById('cart-items');
            listaUI.innerHTML = '';
            
            if (carrito.length === 0) {
                listaUI.innerHTML = '<p style="text-align: center; color: #888; margin-top: 20px;">El carrito est√° vac√≠o</p>';
                document.getElementById('total-price').textContent = '0.00';
                document.getElementById('cart-count').textContent = '0';
                return;
            }
            
            let total = 0, count = 0;
            carrito.forEach(item => {
                total += item.precio * item.cantidad;
                count += item.cantidad;
                listaUI.innerHTML += `
                    <div class="cart-item">
                        <div>
                            <strong>${item.nombre}</strong><br>
                            <small>$${item.precio.toFixed(2)} c/u</small>
                            <div class="qty-controls">
                                <button class="btn-qty" onclick="cambiarCantidad(${item.id}, -1)">-</button>
                                <span style="font-weight: bold;">${item.cantidad}</span>
                                <button class="btn-qty" onclick="cambiarCantidad(${item.id}, 1)">+</button>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <strong>$${(item.precio * item.cantidad).toFixed(2)}</strong><br>
                            <button onclick="eliminar(${item.id})" style="border:none; color:var(--color-accent); cursor:pointer; background:none; font-weight:bold; margin-top: 5px; display: flex; align-items: center; gap: 3px;">
                                <i class="bi bi-trash"></i> Eliminar
                            </button>
                        </div>
                    </div>`;
            });
            
            document.getElementById('total-price').textContent = total.toFixed(2);
            document.getElementById('cart-count').textContent = count;
        }

        // CORRECCI√ìN: Orden de compra formal bien alineado
        function abrirResumen() {
            if (carrito.length === 0) {
                // Usar SweetAlert2 para mensaje m√°s elegante
                Swal.fire({
                    icon: 'warning',
                    title: 'Carrito vac√≠o',
                    text: 'Agrega productos antes de finalizar el pedido',
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                });
                return;
            }
            
            const resumenBox = document.getElementById('resumen-lista');
            let total = 0;
            let subtotal = 0;
            
            const fecha = new Date().toLocaleDateString('es-VE', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            let html = `
                <div class="receipt-header">
                    <div>
                        <strong>Fecha:</strong><br>
                        ${fecha}
                    </div>
                    <div style="text-align: right;">
                        <strong>Orden #:</strong><br>
                        ${numeroOrden}
                    </div>
                </div>
                <div class="receipt-items">
                    <div class="receipt-item" style="font-weight: bold; border-bottom: 2px solid #333;">
                        <div class="item-name">PRODUCTO</div>
                        <div class="item-qty">CANT</div>
                        <div class="item-price">P.U.</div>
                        <div class="item-total">SUBTOTAL</div>
                    </div>
            `;
            
            carrito.forEach(item => {
                const itemTotal = item.precio * item.cantidad;
                subtotal += itemTotal;
                
                html += `
                    <div class="receipt-item">
                        <div class="item-name">${item.nombre}</div>
                        <div class="item-qty">${item.cantidad}</div>
                        <div class="item-price">$${item.precio.toFixed(2)}</div>
                        <div class="item-total">$${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });
            
            total = subtotal;
            
            html += `
                </div>
                <div class="receipt-totals">
                    <div class="total-row">
                        <span>Subtotal:</span>
                        <span>$${subtotal.toFixed(2)}</span>
                    </div>
                    <div class="total-row final">
                        <span>TOTAL:</span>
                        <span>$${total.toFixed(2)}</span>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px; font-size: 0.8rem; color: #666; border-top: 1px dashed #ccc; padding-top: 10px;">
                    <strong>Daior</strong><br>
                    Caracas, Venezuela<br>
                    Tel√©fono: +58 412-XXXXXXX<br>
                    Gracias por su compra!
                </div>
            `;
            
            resumenBox.innerHTML = html;
            document.getElementById('modal-resumen').classList.add('active');
        }

        function cerrarResumen() { 
            document.getElementById('modal-resumen').classList.remove('active'); 
        }
        
        function toggleCart() { 
            document.getElementById('cart-sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        // FUNCI√ìN RESTAURADA: Descargar orden como PNG (formato anterior)
        function descargarResumenPNG() {
            const node = document.getElementById('resumen-lista');
            
            if (!node) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'No se pudo generar la orden. Int√©ntalo de nuevo.',
                    confirmButtonColor: '#e74c3c'
                });
                return;
            }

            // Mostrar mensaje de carga
            Swal.fire({
                title: 'Generando orden...',
                text: 'Por favor espera un momento.',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            // Opciones optimizadas para imagen PNG fiel al dise√±o
            const options = {
                backgroundColor: '#ffffff',
                pixelRatio: 2, // Resoluci√≥n √≥ptima
                width: node.offsetWidth,
                height: node.offsetHeight + 20, // Altura din√°mica + margen
                style: {
                    margin: '0',
                    padding: '0',
                    borderRadius: '8px'
                }
            };

            // Usar la librer√≠a html-to-image para convertir a PNG
            htmlToImage.toPng(node, options)
                .then(function (dataUrl) {
                    // Cerrar mensaje de carga
                    Swal.close();
                    
                    // Crear un enlace y activar la descarga
                    const link = document.createElement('a');
                    link.download = `daior_Orden_${numeroOrden}.png`;
                    link.href = dataUrl;
                    link.click();
                    
                    // Notificaci√≥n de √©xito
                    Swal.fire({
                        icon: 'success',
                        title: 'Orden descargada',
                        text: `La imagen "daior_Orden_${numeroOrden}.png" se ha guardado en tu dispositivo.`,
                        toast: true,
                        position: 'top-end',
                        showConfirmButton: false,
                        timer: 3000
                    });
                })
                .catch(function (error) {
                    console.error('Error al generar la imagen:', error);
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: 'No se pudo generar la orden. Int√©ntalo de nuevo.',
                        confirmButtonColor: '#e74c3c'
                    });
                });
        }

        // CORRECCI√ìN: Funci√≥n mejorada para procesar el env√≠o a Telegram
        function procesarEnvioTelegram() {
            // Cerrar primero el modal de resumen temporalmente para que SweetAlert2 aparezca encima
            document.getElementById('modal-resumen').classList.remove('active');
            
            // Usar SweetAlert2 para confirmaci√≥n
            Swal.fire({
                title: '¬øYa descargaste el recibo?',
                html: `
                    <div style="text-align: left; padding: 10px;">
                        <p><strong>‚ö†Ô∏è IMPORTANTE:</strong></p>
                        <p>Si ya tienes el recibo, sigue adelante.</p>
                        <p>Si no, vuelve al resumen de pedido.</p>
                        <p>Sin recibo no se procesar√° el pedido.</p>
                    </div>
                `,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#0088cc',
                cancelButtonColor: '#95a5a6',
                confirmButtonText: 'S√≠, lo tengo',
                cancelButtonText: 'Cancelar',
                reverseButtons: true,
                allowOutsideClick: false,
                customClass: {
                    container: 'swal2-container',
                    popup: 'swal2-popup'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Limpiar carrito
                    carrito = [];
                    // Generar nuevo n√∫mero de orden para el pr√≥ximo pedido
                    numeroOrden = generarNumeroOrden();
                    
                    guardar();
                    
                    // Cerrar tambi√©n el carrito si est√° abierto
                    if(document.getElementById('cart-sidebar').classList.contains('active')) {
                        toggleCart();
                    }
                    
                    // Mostrar SweetAlert2 de pedido completado EN EL CENTRO
                    Swal.fire({
                        title: '¬°Pedido Completado!',
                        html: `
                            <div style="text-align: center; padding: 15px;">
                                <div style="font-size: 4rem; color: #27ae60; margin-bottom: 15px;">
                                    <i class="bi bi-check-circle-fill"></i>
                                </div>
                                <h3 style="color: #2c3e50; margin-bottom: 10px;">¬°Gracias por tu compra!</h3>
                                <p style="color: #666; margin-bottom: 20px;">
                                    Tu pedido ha sido procesado exitosamente.<br>
                                    Recuerda enviar la captura o la orden descargada a nuestro Telegram.
                                </p>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 20px 0;">
                                    <p style="margin: 0; color: #2c3e50;">
                                        <strong>N√∫mero de orden:</strong><br>
                                        <span style="font-family: monospace; font-size: 1.2rem;">${numeroOrden}</span>
                                    </p>
                                </div>
                            </div>
                        `,
                        icon: 'success',
                        confirmButtonText: 'Volver a la tienda',
                        confirmButtonColor: '#2c3e50',
                        allowOutsideClick: false,
                        allowEscapeKey: false,
                        allowEnterKey: false,
                        showCancelButton: false,
                        focusConfirm: true,
                        customClass: {
                            container: 'swal2-container',
                            popup: 'swal2-popup'
                        }
                    }).then((result) => {
                        // Cuando el usuario haga clic en "Volver a la tienda"
                        // Redirigir a Telegram en nueva pesta√±a
                        window.open('https://t.me/joshgtz', '_blank');
                        // La alerta se cierra autom√°ticamente al hacer clic
                    });
                } else {
                    // Si el usuario cancela, mostrar recordatorio y volver a abrir el resumen
                    Swal.fire({
                        title: 'Recordatorio',
                        html: `
                            <div style="text-align: center; padding: 10px;">
                                <div style="font-size: 3rem; color: #f39c12; margin-bottom: 10px;">
                                    <i class="bi bi-exclamation-triangle-fill"></i>
                                </div>
                                <p style="color: #666;">
                                    Recuerda tomar la captura de pantalla<br>
                                    o descargar la orden como imagen PNG<br>
                                    <strong>antes de continuar</strong>.
                                </p>
                                <p style="color: #999; font-size: 0.9rem; margin-top: 15px;">
                                    La orden desaparecer√° cuando env√≠es el pedido.
                                </p>
                            </div>
                        `,
                        icon: 'info',
                        confirmButtonText: 'Entendido',
                        confirmButtonColor: '#95a5a6',
                        timer: 8000,
                        timerProgressBar: true,
                        customClass: {
                            container: 'swal2-container',
                            popup: 'swal2-popup'
                        }
                    }).then(() => {
                        // Volver a abrir el modal de resumen
                        document.getElementById('modal-resumen').classList.add('active');
                    });
                }
            });
        }

        // FUNCI√ìN MEJORADA PARA APLICAR TODOS LOS FILTROS
        function aplicarFiltros() {
            const cat = document.getElementById('filtro-categoria').value;
            const precio = parseFloat(document.getElementById('filtro-precio').value);
            const busqueda = document.getElementById('filtro-busqueda').value.toLowerCase().trim();
            
            const filtrados = productos.filter(p => {
                // Filtro por categor√≠a
                if (cat !== 'todos' && p.categoria !== cat) return false;
                
                // Filtro por precio
                if (p.precio > precio) return false;
                
                // Filtro por b√∫squeda (si hay texto)
                if (busqueda !== '' && !p.nombre.toLowerCase().includes(busqueda)) return false;
                
                return true;
            });
            
            renderizar(filtrados);
        }

        function actualizarLabelPrecio() { 
            document.getElementById('precio-valor').textContent = document.getElementById('filtro-precio').value; 
        }

        // Inicializar la p√°gina
        function inicializarPagina() {
            cargarCategorias(); // Cargar categor√≠as autom√°ticamente
            renderizar(productos);
            actualizarUI();
            
            // Mostrar banner de oferta despu√©s de cargar
            mostrarBannerOferta();
        }

        inicializarPagina();
        
        // Cerrar modales con la tecla ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.getElementById('cart-sidebar').classList.remove('active');
                document.getElementById('overlay').classList.remove('active');
                document.getElementById('modal-resumen').classList.remove('active');
                cerrarModalProducto();
            }
        });

        // Cerrar modal de producto al hacer clic fuera
        document.getElementById('modal-producto').addEventListener('click', function(event) {
            if (event.target === this) {
                cerrarModalProducto();
            }
        });
    </script>
</body>

</html>
